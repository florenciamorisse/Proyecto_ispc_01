
Se estudia un aspecto fundamental de las bases de datos: su diseño. En las bases de datos se ha establecido un ciclo de desarrollo que consta de tres etapas de diseño: ######el diseño conceptual, ######el diseño lógico y ######el diseño físico.
#Etapas de diseño 
 La metodología de diseño de bases de datos relacionales se ha consolidado a lo largo de los años satisfaciendo las propiedades de generalidad (independencia de la plataforma hardware/software), calidad del producto (precisión, completitud y eficacia) y facilidad de uso. 
** ** _ _ Diseño conceptual.  Objetivo: definir las entidades y las relaciones entre ellos de forma abstracta. Herramienta: Modelo conceptual de datos. Se usa alguna variante del modelo entidad-relación para las bases de datos relacionales. 
Resultado: Esquema conceptual de la base de datos. 
** ** _ _Diseño lógico. Objetivo:definir el esquema de la base de datos según el modelo que implementa el SGBD. Herramienta: Modelo lógico de datos. Se usa el modelo lógico que implemente el sistema de gestión de bases de datos objetivo, pero es independiente de los aspectos físicos. Se usan técnicas formales para verificar la calidad del esquema lógico; la más usual es la normalización. Resultado: Esquema lógico de la base de datos. 
** ** _ _Diseño físico. Objetivo: definir el esquema físico de la base de datos de forma que se den todas las instrucciones para que un DBA pueda implementar la base de datos sin ninguna ambigüedad.  Herramienta: Modelo físico de datos. Se consideran todos los detalles de la implementación física: organización de archivos e índices para el SGBD considerado. Resultado: Esquema físico de la base de datos. 
***Diseño físico***: El objetivo  es la generación del esquema físico de la base de datos en el modelo de datos que implementa el SGBD. Es decir, la definición de las tablas con sus campos, la imposición de las restricciones de integridad y la definición de índices. Este último  son estructuras de datos implementadas con ficheros que permiten un acceso más eficaz a los datos. Se organizan con respecto a uno o más campos (los denominados campos clave del índice) y guardan sólo la información del valor de la clave y la dirección física a partir de la cual se pueden encontrar registros con ese valor. Los índices son secuencias de registros que tienen dos campos: el valor de la clave y la dirección física del registro del fichero de datos .Los índices permiten disminuir el tiempo de entrada/salida  a disco. Cuando el SGBD necesita buscar un registro según un valor de un campo (por ejemplo, un número de DNI), busca el valor en el índice, consulta la dirección del registro adjunto y a continuación busca en el fichero de datos (donde se almacenan los datos de la tabla correspondiente) el registro. Los índices se organizan como estructuras que permiten localizar el valor en menos tiempo. Si se declara un índice, ese índice se debe mantener actualizado cada vez que la tabla sufra cualquier modificación.  Por otra parte, si hay alternativas, siempre es mejor definir índices para los campos de menor amaño, ya que cuanto más pequeño sea el campo clave, más pequeño será el índice y se necesitarán menos operaciones de lectura del índice.Los índices únicos indican que se aplican sobre campos en los cuales no debe haber elementos repetidos. Todas las claves primarias llevan asociado un índice de forma predeterminada. También se puede indicar que acepten valores nulos o no. Si se aceptan, el índice permitirá esos valores nulos, pero los registros que los contengan no estarán apuntados por el índice. 
 ***Restricciones de integridad***: ayudan a mantener la consistencia semántica de los datos. Además de las restricciones de integridad definidas por las claves, las restricciones de cardinalidad y las de participación total estudiadas anteriormente, se tratan las restricciones de los dominios, la integridad referencial, las dependencias funcionales y las dependencias multivaloradas. Las restricciones de integridad proporcionan un medio de asegurar que las modificaciones hechas a la base de datos por los usuarios autorizados no provoquen la pérdida de la consistencia de los datos. Protegen a la base de datos contra los daños accidentales (no contra daños intencionados, de lo cual se ocupa la seguridad de las bases de datos). Los tipos de restricciones de integridad en una base de datos son: 
• Claves. 
• Cardinalidad de la relación.
• Restricciones de los dominios. 
• Integridad referencial. 
• Participación total.
• Dependencias funcionales. 
• Otras restricciones (Se recogen las restricciones que no se pueden catalogar en los casos anteriores.)
En las bases de datos tenemos los siguientes mecanismos para implementar las restricciones de integridad:  • Declaración de claves.• Declaración de integridad referencial.• Declaración de tipo de cardinalidad. • Disparadores (Triggers). 
 ***Restricciones de los dominios***: son la forma más simple de restricción de integridad. Se especifica para cada atributo un dominio de valores posibles. Permite verificar los valores introducidos en la base de datos y también examinar las consultas para asegurarse de que tengan sentido las comparaciones que hagan. La cláusula check de SQL:1999 permite restringir los dominios de maneras poderosas que no permiten la mayor parte de los sistemas de tipos de los lenguajes de programación. La cláusula check permite especificar un predicado que debe satisfacer cualquier valor asignado a una variable cuyo tipo sea el dominio. Por ejemplo: Restricciones de existencia, esta restricción evita la aparición de valores nulos en las columnas. Se especifica indicando en la creación de la tabla cuáles son los atributos que no pueden contener valores nulos. De manera predeterminada, los atributos que formen parte de la clave primaria tienen esta restricción impuesta. Para declarar esta restricción en la definición de la tabla se usaría NOT NULL después del nombre del atributo y su dominio. Restricciones de unicidad :  se puede aplicar a cualquier dominio, evita la aparición de valores duplicados en las columnas (de forma parecida a lo que hace la clave rimaria). 
 ***Restricciones de integridad referencial***: La integridad referencial permite asegurar que un valor que aparece en una relación para un conjunto de atributos determinado aparezca también en otra relación para ese mismo conjunto de atributos.  El sistema, por su parte, puede asegurar la imposición de estas restricciones de integridad, evitando la aparición de valores que las violen.La modificación de la base de datos puede ocasionar violaciones de la integridad referencial. Se distinguen tres casos: 
• Al insertar una tupla es necesario comprobar que haya otra con los valores de la clave externa igual a los de sus atributos clave.
• Al borrar una tupla de R el sistema debe calcular el conjunto de tuplas de las otras relaciones que hacen referencia a R. Si este conjunto no es el conjunto vacío, o bien se rechaza la orden borrar como error, o bien se deben borrar las todas las tuplas que hacen referencia a R. La última solución puede llevar a borrados en cascada, dado que las tuplas pueden hacer referencia a tuplas que hagan referencia a R, etcétera. 
• Actualizar. Hay que considerar dos casos: las actualizaciones de la relación que realiza la referencia (r2) y las actualizaciones de la relación a la que se hace referencia (r1).  
 ***Dependencias funcionales***:Una dependencia funcional (DF) es una propiedad semántica de un esquema de relación que impone el diseñador. Determina el valor de un conjunto de atributos a partir del valor de otro conjunto de atributos.  Las dependencias funcionales se denotan de la siguiente forma: 
Conjunto de atributos que determinan → Conjunto de atributos determinados. Disparadores : Un disparador es un mecanismo que se puede usar para implementar restricciones de integridad no soportadas directamente por el SGBD. Es una orden que el sistema ejecuta de manera automática como efecto secundario de la modificación de la base de datos.Son mecanismos útiles para implementar restricciones de integridad, alertar a los usuarios o para realizar de manera automática ciertas tareas cuando se cumplen determinadas condiciones.  Normalización : Es necesario contar con una medida de la calidad de la agrupación de los atributos en relaciones. Como herramienta principal se usan las dependencias funcionales para agrupar los atributos en esquemas de relación, que se dice que se encuentran en una determinada forma normal.La forma normal de un esquema de relación determina su grado de calidad con respecto a reducir dos efectos no deseados: la redundancia de datos y las anomalías que produce esta redundancia. Es importante determinar en qué forma normal se encuentra un esquema de relación y el procedimiento, conocido como normalización, para descomponerlo en otros esquemas de relación que se encuentren en formas normales más exigentes.  
 Redundancia de datos : Un objetivo del diseño de bases de datos relacionales es agrupar atributos en relaciones de forma que se reduzca la redundancia de datos y así el espacio de almacenamiento necesario. Las relaciones con datos redundantes presentan diferentes anomalías de actualización: son las anomalías de inserción, borrado y modificación.  Anomalías de actualización y Anomalías de inserción. Se produce en dos casos. En primer lugar, cuando se inserta una nueva fila sin respetar las dependencias funcionales. En segundo lugar, la imposibilidad de añadir nuevos datos para el consecuente de la dependencia funcional sin que exista un antecedente para ella.  Anomalías de modificación: Se produce cuando se modifican las columnas con datos redundantes de sólo un subconjunto de las filas con el mismo dato. Anomalías de eliminación: Se produce cuando se eliminan todas las filas en las que aparecen los datos redundantes por lo que se pierde los datos de la dependencia funcional. 
***Las  Formas normales y normalización***  : La forma normal de una relación se refiere a la mejor forma normal que satisface un esquema de relación indicando así el grado hasta el que se ha normalizado. La indicación del grado de calidad de un esquema de relación se refiere en general en el contexto global del esquema de la base de datos relacional, es decir, en el conjunto de todos los esquemas de relación de la base de datos. Dos propiedades que se deben cumplir para poder asegurarlo son: • La propiedad de preservación de dependencias, que asegura que las dependencias funcionales originales se mantienen en algún esquema de relación después de la descomposición.• La propiedad de la posibilidad de reproducir la información de la tabla antes de su descomposición a partir de las tablas resultado de ella.
Las formas normales más habituales, por orden ascendente deexigencia de las propiedades deseadas, son: Primera (1FN) , Segunda (2FN) ,Tercera (3FN) y Boyce/Codd (FNBC). La utilidad práctica de estas formas normales es cuestionable cuando las restricciones en que se basan son difíciles de entender o identificar por los diseñadores y usuarios. Así, en la práctica se usa hasta la forma normal de Boyce/Codd, aunque en general, los diseños prácticos exigen al menos 3FN. El proceso de asegurar una forma normal para un esquema se denomina normalización. 
 Primera forma normal establece que los dominios de los atributos sólo pueden ser atómicos, para evitar atributos multivalorados, compuestos y sus combinaciones. En definitiva evita las relaciones dentro de las relaciones.  Segunda forma normal : Se dice que una relación está en segunda forma normal si cada atributo que no forme parte de la clave primaria depende funcional y completamente de cada clave. Un esquema que no se encuentre en segunda forma normal puede traducirse en varios esquemas que sí lo estén. El procedimiento de normalización es crear tantas nuevas relaciones como dependencias funcionales no sean completas. 
Tercera forma normal : La tercera forma normal se basa en el concepto de dependencia funcional transitiva. Una dependencia funcional X →Y es una dependencia funcional transitiva si existe un conjunto de atributos Z que ni forman clave candidata ni son subconjunto de ninguna clave y además se cumple X → Z y Z →Y . Un esquema está en tercera forma normal si satisface la segunda forma normal y ninguno de los atributos que no forman parte de una clave candidata depende transitivamente de la clave primaria. El procedimiento para normalizar esta relación consiste el descomponerla en los atributos definidos por la dependencia funcional responsable de la transitividad. 
 Forma normal de Boyce-Codd: La forma normal de Boyce-Codd (FNBC) se propuso como una forma más simple que la tercera, pero más estricta porque cada relación en FNBC está en 3FN pero lo contrario no se cumple.  La FNBC evita redundancias que la 3FN no puede. 
Desnormalización para el rendimiento: A veces los diseñadores de bases de datos escogen un esquema que tiene información redundante; es decir, que no está normalizada. Utilizan la redundancia para mejorar el rendimiento para aplicaciones concretas. El proceso de tomar un esquema normalizado y hacerlo no normalizado se denomina desnormalización, y los diseñadores lo utilizan para ajustar el rendimiento de los sistemas para dar soporte a las operaciones críticas en el tiempo. 

Se estudia un aspecto fundamental de las bases de datos: su diseño. En las bases de datos se ha establecido un ciclo de desarrollo que consta de tres etapas de diseño: ######el diseño conceptual, ######el diseño lógico y ######el diseño físico.
#Etapas de diseño 
 La metodología de diseño de bases de datos relacionales se ha consolidado a lo largo de los años satisfaciendo las propiedades de generalidad (independencia de la plataforma hardware/software), calidad del producto (precisión, completitud y eficacia) y facilidad de uso. 
** ** _ _ Diseño conceptual.  Objetivo: definir las entidades y las relaciones entre ellos de forma abstracta. Herramienta: Modelo conceptual de datos. Se usa alguna variante del modelo entidad-relación para las bases de datos relacionales. 
Resultado: Esquema conceptual de la base de datos. 
** ** _ _Diseño lógico. Objetivo:definir el esquema de la base de datos según el modelo que implementa el SGBD. Herramienta: Modelo lógico de datos. Se usa el modelo lógico que implemente el sistema de gestión de bases de datos objetivo, pero es independiente de los aspectos físicos. Se usan técnicas formales para verificar la calidad del esquema lógico; la más usual es la normalización. Resultado: Esquema lógico de la base de datos. 
** ** _ _Diseño físico. Objetivo: definir el esquema físico de la base de datos de forma que se den todas las instrucciones para que un DBA pueda implementar la base de datos sin ninguna ambigüedad.  Herramienta: Modelo físico de datos. Se consideran todos los detalles de la implementación física: organización de archivos e índices para el SGBD considerado. Resultado: Esquema físico de la base de datos. 
***Diseño físico***: El objetivo  es la generación del esquema físico de la base de datos en el modelo de datos que implementa el SGBD. Es decir, la definición de las tablas con sus campos, la imposición de las restricciones de integridad y la definición de índices. Este último  son estructuras de datos implementadas con ficheros que permiten un acceso más eficaz a los datos. Se organizan con respecto a uno o más campos (los denominados campos clave del índice) y guardan sólo la información del valor de la clave y la dirección física a partir de la cual se pueden encontrar registros con ese valor. Los índices son secuencias de registros que tienen dos campos: el valor de la clave y la dirección física del registro del fichero de datos .Los índices permiten disminuir el tiempo de entrada/salida  a disco. Cuando el SGBD necesita buscar un registro según un valor de un campo (por ejemplo, un número de DNI), busca el valor en el índice, consulta la dirección del registro adjunto y a continuación busca en el fichero de datos (donde se almacenan los datos de la tabla correspondiente) el registro. Los índices se organizan como estructuras que permiten localizar el valor en menos tiempo. Si se declara un índice, ese índice se debe mantener actualizado cada vez que la tabla sufra cualquier modificación.  Por otra parte, si hay alternativas, siempre es mejor definir índices para los campos de menor amaño, ya que cuanto más pequeño sea el campo clave, más pequeño será el índice y se necesitarán menos operaciones de lectura del índice.Los índices únicos indican que se aplican sobre campos en los cuales no debe haber elementos repetidos. Todas las claves primarias llevan asociado un índice de forma predeterminada. También se puede indicar que acepten valores nulos o no. Si se aceptan, el índice permitirá esos valores nulos, pero los registros que los contengan no estarán apuntados por el índice. 
 ***Restricciones de integridad***: ayudan a mantener la consistencia semántica de los datos. Además de las restricciones de integridad definidas por las claves, las restricciones de cardinalidad y las de participación total estudiadas anteriormente, se tratan las restricciones de los dominios, la integridad referencial, las dependencias funcionales y las dependencias multivaloradas. Las restricciones de integridad proporcionan un medio de asegurar que las modificaciones hechas a la base de datos por los usuarios autorizados no provoquen la pérdida de la consistencia de los datos. Protegen a la base de datos contra los daños accidentales (no contra daños intencionados, de lo cual se ocupa la seguridad de las bases de datos). Los tipos de restricciones de integridad en una base de datos son: 
• Claves. 
• Cardinalidad de la relación.
• Restricciones de los dominios. 
• Integridad referencial. 
• Participación total.
• Dependencias funcionales. 
• Otras restricciones (Se recogen las restricciones que no se pueden catalogar en los casos anteriores.)
En las bases de datos tenemos los siguientes mecanismos para implementar las restricciones de integridad:  • Declaración de claves.• Declaración de integridad referencial.• Declaración de tipo de cardinalidad. • Disparadores (Triggers). 
 ***Restricciones de los dominios***: son la forma más simple de restricción de integridad. Se especifica para cada atributo un dominio de valores posibles. Permite verificar los valores introducidos en la base de datos y también examinar las consultas para asegurarse de que tengan sentido las comparaciones que hagan. La cláusula check de SQL:1999 permite restringir los dominios de maneras poderosas que no permiten la mayor parte de los sistemas de tipos de los lenguajes de programación. La cláusula check permite especificar un predicado que debe satisfacer cualquier valor asignado a una variable cuyo tipo sea el dominio. Por ejemplo: Restricciones de existencia, esta restricción evita la aparición de valores nulos en las columnas. Se especifica indicando en la creación de la tabla cuáles son los atributos que no pueden contener valores nulos. De manera predeterminada, los atributos que formen parte de la clave primaria tienen esta restricción impuesta. Para declarar esta restricción en la definición de la tabla se usaría NOT NULL después del nombre del atributo y su dominio. Restricciones de unicidad :  se puede aplicar a cualquier dominio, evita la aparición de valores duplicados en las columnas (de forma parecida a lo que hace la clave rimaria). 
 ***Restricciones de integridad referencial***: La integridad referencial permite asegurar que un valor que aparece en una relación para un conjunto de atributos determinado aparezca también en otra relación para ese mismo conjunto de atributos.  El sistema, por su parte, puede asegurar la imposición de estas restricciones de integridad, evitando la aparición de valores que las violen.La modificación de la base de datos puede ocasionar violaciones de la integridad referencial. Se distinguen tres casos: 
• Al insertar una tupla es necesario comprobar que haya otra con los valores de la clave externa igual a los de sus atributos clave.
• Al borrar una tupla de R el sistema debe calcular el conjunto de tuplas de las otras relaciones que hacen referencia a R. Si este conjunto no es el conjunto vacío, o bien se rechaza la orden borrar como error, o bien se deben borrar las todas las tuplas que hacen referencia a R. La última solución puede llevar a borrados en cascada, dado que las tuplas pueden hacer referencia a tuplas que hagan referencia a R, etcétera. 
• Actualizar. Hay que considerar dos casos: las actualizaciones de la relación que realiza la referencia (r2) y las actualizaciones de la relación a la que se hace referencia (r1).  
 ***Dependencias funcionales***:Una dependencia funcional (DF) es una propiedad semántica de un esquema de relación que impone el diseñador. Determina el valor de un conjunto de atributos a partir del valor de otro conjunto de atributos.  Las dependencias funcionales se denotan de la siguiente forma: 
Conjunto de atributos que determinan → Conjunto de atributos determinados. Disparadores : Un disparador es un mecanismo que se puede usar para implementar restricciones de integridad no soportadas directamente por el SGBD. Es una orden que el sistema ejecuta de manera automática como efecto secundario de la modificación de la base de datos.Son mecanismos útiles para implementar restricciones de integridad, alertar a los usuarios o para realizar de manera automática ciertas tareas cuando se cumplen determinadas condiciones.  Normalización : Es necesario contar con una medida de la calidad de la agrupación de los atributos en relaciones. Como herramienta principal se usan las dependencias funcionales para agrupar los atributos en esquemas de relación, que se dice que se encuentran en una determinada forma normal.La forma normal de un esquema de relación determina su grado de calidad con respecto a reducir dos efectos no deseados: la redundancia de datos y las anomalías que produce esta redundancia. Es importante determinar en qué forma normal se encuentra un esquema de relación y el procedimiento, conocido como normalización, para descomponerlo en otros esquemas de relación que se encuentren en formas normales más exigentes.  
 Redundancia de datos : Un objetivo del diseño de bases de datos relacionales es agrupar atributos en relaciones de forma que se reduzca la redundancia de datos y así el espacio de almacenamiento necesario. Las relaciones con datos redundantes presentan diferentes anomalías de actualización: son las anomalías de inserción, borrado y modificación.  Anomalías de actualización y Anomalías de inserción. Se produce en dos casos. En primer lugar, cuando se inserta una nueva fila sin respetar las dependencias funcionales. En segundo lugar, la imposibilidad de añadir nuevos datos para el consecuente de la dependencia funcional sin que exista un antecedente para ella.  Anomalías de modificación: Se produce cuando se modifican las columnas con datos redundantes de sólo un subconjunto de las filas con el mismo dato. Anomalías de eliminación: Se produce cuando se eliminan todas las filas en las que aparecen los datos redundantes por lo que se pierde los datos de la dependencia funcional. 
***Las  Formas normales y normalización***  : La forma normal de una relación se refiere a la mejor forma normal que satisface un esquema de relación indicando así el grado hasta el que se ha normalizado. La indicación del grado de calidad de un esquema de relación se refiere en general en el contexto global del esquema de la base de datos relacional, es decir, en el conjunto de todos los esquemas de relación de la base de datos. Dos propiedades que se deben cumplir para poder asegurarlo son: • La propiedad de preservación de dependencias, que asegura que las dependencias funcionales originales se mantienen en algún esquema de relación después de la descomposición.• La propiedad de la posibilidad de reproducir la información de la tabla antes de su descomposición a partir de las tablas resultado de ella.
Las formas normales más habituales, por orden ascendente deexigencia de las propiedades deseadas, son: Primera (1FN) , Segunda (2FN) ,Tercera (3FN) y Boyce/Codd (FNBC). La utilidad práctica de estas formas normales es cuestionable cuando las restricciones en que se basan son difíciles de entender o identificar por los diseñadores y usuarios. Así, en la práctica se usa hasta la forma normal de Boyce/Codd, aunque en general, los diseños prácticos exigen al menos 3FN. El proceso de asegurar una forma normal para un esquema se denomina normalización. 
 Primera forma normal establece que los dominios de los atributos sólo pueden ser atómicos, para evitar atributos multivalorados, compuestos y sus combinaciones. En definitiva evita las relaciones dentro de las relaciones.  Segunda forma normal : Se dice que una relación está en segunda forma normal si cada atributo que no forme parte de la clave primaria depende funcional y completamente de cada clave. Un esquema que no se encuentre en segunda forma normal puede traducirse en varios esquemas que sí lo estén. El procedimiento de normalización es crear tantas nuevas relaciones como dependencias funcionales no sean completas. 
Tercera forma normal : La tercera forma normal se basa en el concepto de dependencia funcional transitiva. Una dependencia funcional X →Y es una dependencia funcional transitiva si existe un conjunto de atributos Z que ni forman clave candidata ni son subconjunto de ninguna clave y además se cumple X → Z y Z →Y . Un esquema está en tercera forma normal si satisface la segunda forma normal y ninguno de los atributos que no forman parte de una clave candidata depende transitivamente de la clave primaria. El procedimiento para normalizar esta relación consiste el descomponerla en los atributos definidos por la dependencia funcional responsable de la transitividad. 
 Forma normal de Boyce-Codd: La forma normal de Boyce-Codd (FNBC) se propuso como una forma más simple que la tercera, pero más estricta porque cada relación en FNBC está en 3FN pero lo contrario no se cumple.  La FNBC evita redundancias que la 3FN no puede. 
Desnormalización para el rendimiento: A veces los diseñadores de bases de datos escogen un esquema que tiene información redundante; es decir, que no está normalizada. Utilizan la redundancia para mejorar el rendimiento para aplicaciones concretas. El proceso de tomar un esquema normalizado y hacerlo no normalizado se denomina desnormalización, y los diseñadores lo utilizan para ajustar el rendimiento de los sistemas para dar soporte a las operaciones críticas en el tiempo. 

